---
title: "Strands Agents„Å®MCP Server on Lambda„Åß‰Ωú„ÇãAWSÁÆ°ÁêÜAI„Ç®„Éº„Ç∏„Çß„É≥„Éà"
emoji: "ü™¢"
type: "tech"
topics: [aws,python,bedrock,ai,aiagent,]
published: false
---

‰ªäÂõû„ÅØStrands Agents„Å®MCP„Çµ„Éº„Éê„Éº„ÅÆLambda„Éá„Éó„É≠„Ç§„ÇíË©¶„Åó„Åæ„Åô„ÄÇ
ÊúÄÁµÇÁöÑ„Å´Ëá™‰ΩúMCP„ÉÑ„Éº„É´„ÇíÂÆüË°å„Åô„ÇãËá™‰Ωú„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÇíAWS‰∏ä„Å´ÊßãÁØâ„Åó„Åæ„Åô„ÄÇ

:::message
„Åì„ÅÆË®ò‰∫ã„ÅØ‰∫∫Èñì„ÅåÊõ∏„Åç„ÄÅÊ†°Ê≠£„Å´„ÅÆ„ÅøAI„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ
:::

# Áô∫Á´Ø
‰æã„Å´„Çà„Å£„Å¶„Åì„Çì„Å™„Åì„Å®üëá„ÇíË®Ä„Å£„Åü„ÅÆ„Åß„ÄÅË®Ä„Å£„Åü„Çâ„ÇÑ„Çã„ÅÆÁ≤æÁ•û„Åß„ÇÑ„Çä„Åæ„Åô„ÄÇ
https://x.com/_cityside/status/1935295906490077590


„Åù„ÅÆ„Å§„ÅÑ„Åß„Å´„ÄÅMCP„Çµ„Éº„Éê„Éº„ÇíLambda‰∏ä„Å´ÊßãÁØâ„Åó„Å¶„Åø„Çã„ÅÆ„ÇÇ„ÇÑ„Å£„Å¶„Åø„Åü„Åã„Å£„Åü„ÅÆ„Åß„ÄÅ
„Åì„ÅÆÈöõ„Åù„ÅÆ‰∏°Êñπ„Çí„ÅÑ„Å£„Å∫„Çì„Å´Ëß¶„Çã„Åπ„ÅèMCP„Çí‰Ωø„ÅÜ„Ç®„Éº„Ç∏„Çß„É≥„Éà„Çí‰Ωú„Å£„Å¶„Åø„Åæ„Åô„ÄÇ


# „Åæ„Åö„ÅØÂÆåÊàêÁâ©„Åã„Çâ

## ÂãïÁîª„ÇíÊíÆ„Å£„Åü„Çà
„Éá„É¢ÂãïÁîª„Çí‰Ωú„Çä„Åæ„Åó„Åü


## LT„ÅßÁô∫Ë°®„Åó„Åæ„Åó„Åü
„Åì„ÅÆ„Éñ„É≠„Ç∞„ÅÆÂÜÖÂÆπ„ÇíLT„ÅßÁô∫Ë°®„Åó„Åæ„Åó„Åü
„É™„Ç¢„É´„Çø„Ç§„É†„Åß„Éá„É¢„ÇÇ„ÇÑ„Å£„Å¶„Åæ„Åô


## LT„ÅÆË≥áÊñô„ÅØ„Åì„Å°„Çâ„Åã„Çâ



# Ë¶Å‰ª∂„ÉªË®≠Ë®à

## Ë¶Å‰ª∂Êï¥ÁêÜ
Ë¶Å‰ª∂„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åô„ÄÇ
„Éª„ÉÅ„É£„ÉÉ„Éà„Éô„Éº„Çπ„ÅßAI„Ç®„Éº„Ç∏„Çß„É≥„Éà„Å®‰ºöË©±„Åß„Åç„Çã„ÄÇ
„Éª„ÄåAWS„Åß‚óã‚óãÔºà„É¶„Éº„Ç∂„ÉºÂêçÔºâ„ÅÆ‰ΩúÊ•≠ÂÜÖÂÆπ„ÇíË™øÊüª„Åó„Å¶„Äç„Å™„Å©„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„Å´ÂØæ„Åó„Å¶„ÄÅ
„ÄÄMCP„ÉÑ„Éº„É´„Çí‰ªã„Åó„Å¶AWS API„ÇíÂÆüË°å„Åó„ÄÅAPI„ÅÆÂÆüË°åÁµêÊûú„Åã„ÇâÂõûÁ≠î„ÇíÁîüÊàê„Åß„Åç„Çã„ÄÇ
„Éª„Åô„Åπ„Å¶„ÇíAWS‰∏ä„Å´ÊßãÁØâ„Åô„Çã„ÄÇ

## ÊäÄË°ìË¶ÅÁ¥†„ÅÆÊï¥ÁêÜ
„ÉªAI„Ç®„Éº„Ç∏„Çß„É≥„Éà„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ„Å´„ÅØStrands Agents„ÄÅWeb„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ„Å´„ÅØStreamlit„Çí‰ΩøÁî®„ÄÇ
„Éª„Ç®„Éº„Ç∏„Çß„É≥„Éà„Ç¢„Éó„É™„ÅØECS Fargate„Å´„Éá„Éó„É≠„Ç§„ÄÇ
„ÉªLLM„Å´„ÅØAmazon Bedrock„Åß‰ΩøÁî®„Åß„Åç„Çã„É¢„Éá„É´„Åã„Çâ„ÄÅClaude 3.5 Sonnet V2„Çí‰ΩøÁî®„ÄÇ
„ÉªMCP„ÉÑ„Éº„É´„ÄÅ„Çµ„Éº„Éê„Éº„ÅØAWS Lambda‰∏ä„Å´ÊßãÁØâ„ÄÇ„Éï„É≠„É≥„Éà„Å´Âêà„Çè„Åõ„Å¶Python„Åß‰Ωú„Çã„ÄÇ
„Éª„É¶„Éº„Ç∂„Éº„ÅÆ‰ΩúÊ•≠Â±•Ê≠¥„ÅÆÂèñÂæó„ÅÆ„Åü„ÇÅ„ÄÅMCP„ÉÑ„Éº„É´„Åã„Çâ„ÅØAmazon CloudTrail„ÅÆAPI„ÇíÂÆüË°å„Åô„Çã„ÄÇ
„Éª„Åô„Åπ„Å¶„ÇíAWS CDK„ÅßÊßãÁØâ„Åô„Çã„ÄÇ

## ÊßãÊàêÂõ≥
‰ªäÂõû„ÅÆÊßãÊàê„ÄÅ„Å§„Åæ„Çä„Åì„ÅÜ„ÅÑ„ÅÜ„Åì„Å®„Å´„Å™„Çä„Åæ„Åô„ÄÇ
![](https://storage.googleapis.com/zenn-user-upload/f343e121acfd-20250624.png)



# Strands Agents„Å®„ÅØ
Strands Agents„ÅØAWS„Åå5Êúà„Å´Áô∫Ë°®„Åó„Åü„Ç™„Éº„Éó„É≥„ÇΩ„Éº„Çπ„ÅÆAI„Ç®„Éº„Ç∏„Çß„É≥„ÉàSDK„Åß„Åô„ÄÇ
2025/6ÊúàÁèæÂú®„Åß„ÅØPythonÂêë„Åë„ÅÆ„ÇÇ„ÅÆ„ÅåÂÖ¨Èñã„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ

„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆ„ÉØ„Éº„ÇØ„Éï„É≠„ÉºÂÆöÁæ©„ÇíÈñãÁô∫ËÄÖ„ÅåË°å„ÅÜ„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ„Å®„ÅØÁï∞„Å™„Å£„Å¶„Äå„É¢„Éá„É´ÈßÜÂãïÂûã„Äç„ÇíÊé°Áî®„Åó„ÄÅ
Êé®Ë´ñ„Éª„ÉÑ„Éº„É´‰ΩøÁî®„ÉªÂøúÁ≠îÁîüÊàê„ÅÆ„Çµ„Ç§„ÇØ„É´„ÇíÊúÄÂÖàÁ´ØLLM„ÅÆÊÄßËÉΩ„Å´Âßî„Å≠„Çã„Ç¢„Éó„É≠„Éº„ÉÅ„Çí„Å®„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ
Strands Agents„ÅØ„Éó„É≠„É≥„Éó„Éà„ÄÅ„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÄÅ‰ΩøÁî®„Åß„Åç„Çã„ÉÑ„Éº„É´„ÇíLLM„Å´Ê∏°„Åó„Å™„Åå„ÇâÂëº„Å≥Âá∫„Åó„ÄÅ
LLM„ÅåÂãïÁöÑ„Å´Ë®àÁîª„Åó„Åü„Çπ„ÉÜ„ÉÉ„Éó„ÅÆÈÅÇË°å„ÇíÁπ∞„ÇäËøî„Åô„ÄÅ„ÄåAgentic Loop„Äç„Çí„Ç≥„Ç¢„Ç≥„É≥„Çª„Éó„Éà„Å®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

Ë©≥Á¥∞„Å´„Å§„ÅÑ„Å¶„ÅØÁô∫Ë°®ÊôÇ„ÅÆ„Éâ„Ç≠„É•„É°„É≥„Éà„ÇíÂèÇÁÖß„Åè„Å†„Åï„ÅÑ„ÄÇ
https://aws.amazon.com/jp/blogs/news/introducing-strands-agents-an-open-source-ai-agents-sdk/


„Éª„Éâ„Ç≠„É•„É°„É≥„Éà
https://strandsagents.com/latest/
„ÉªGitHub repo
https://github.com/strands-agents/sdk-python



# MCP„Å®„ÅØ
MCP„ÅØModel Context Protocol„ÅÆÁï•„Åß„ÄÅÂ§ñÈÉ®„Ç∑„Çπ„ÉÜ„É†„Å™„Å©„ÅåLLM„Å´ÂØæ„Åó„Å¶„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÇíÊèê‰æõ„Åô„Çã„Åü„ÇÅ„ÅÆ„Éó„É≠„Éà„Ç≥„É´„ÅÆ„Åì„Å®„ÇíÊåá„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

‰ªäÂπ¥„Å´ÂÖ•„Å£„Å¶„Åã„ÇâË©±È°å„Å´„Å™„Çä„ÄÅÂΩìÂàù„ÅØ„É≠„Éº„Ç´„É´„ÅßMCP„Çµ„Éº„Éê„Éº„ÇíÁ´ã„Å¶„Å¶„É≠„Éº„Ç´„É´„ÅÆLLM„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Åã„ÇâÂà©Áî®„Åô„Çã„Éë„Çø„Éº„É≥„ÅåÂ§ö„Åã„Å£„Åü„Å®ÊÄù„ÅÑ„Åæ„Åô„Åå„ÄÅ
Êó©„ÄÖ„Å´ÂêÑÁ®Æ„Çµ„Éº„Éì„Çπ„Åå„É™„É¢„Éº„ÉàMCP„ÇíÂÖ¨Èñã„Åó„Åü„Çä„ÄÅÈñãÁô∫ËÄÖ„Åå„É™„É¢„Éº„ÉàMCP„Çí„Éá„Éó„É≠„Ç§„Åô„ÇãÁí∞Â¢É„Åå„Åß„Åç„Åü„Çä„ÄÅ
„Åù„Åó„Å¶Ê¨°„ÄÖ„Å®LLM„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÇÑ„Ç®„Éá„Ç£„Çø„Å™„Å©„ÅåMCP„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅÆÊ©üËÉΩ„ÇíÂÇô„Åà„Å¶„ÅÑ„Å£„Åü„Åì„Å®„Å´„Çà„Çä„ÄÅÊÄ•ÈÄü„Å´ÊôÆÂèä„Åó„Å¶„Åç„Åæ„Åó„Åü„ÄÇ

‰∏ÄÂøúÁßÅ„ÇÇ„É≠„Éº„Ç´„É´MCP„ÅÆÂÖ•ÈñÄË®ò‰∫ã„ÇíÊõ∏„ÅÑ„Å¶„Åø„Åü„Çä„ÇÇ„Åó„Åü„ÅÆ„ÅßËâØ„Åë„Çå„Å∞Ë¶ã„Å¶„Åè„Å†„Åï„ÅÑüëá
Ôºà4„ÅãÊúàÂâç„ÅÆË®ò‰∫ã„Å™„ÅÆ„Åß„Åô„Åß„Å´ÊôÇ‰ª£ÈÅÖ„Çå„Åã„ÇÇÔºâ
https://zenn.dev/yokomachi/articles/20250318_tutorial_mcp


# ÈñãÁô∫„ÉªÊßãÁØâ

„Åß„ÅØÂÆüË£Ö„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ
„ÇΩ„Éº„Çπ„Ç≥„Éº„Éâ„Å´„Å§„ÅÑ„Å¶„ÅØ‰ª•ÈôçÊäúÁ≤ã„Åó„Å¶Ë™¨Êòé„Åó„Åæ„Åô„Åå„ÄÅCDK„ÇíÂê´„ÇÄÂÖ®‰Ωì„ÅÆ„Ç≥„Éº„Éâ„Å´„Å§„ÅÑ„Å¶„ÅØ‰ª•‰∏ã„ÅÆ„É™„Éù„Ç∏„Éà„É™„Çí„ÅîË¶ß„Åè„Å†„Åï„ÅÑ„ÄÇ
https://github.com/n-yokomachi/strands-agents_and_mcp-on-lambda


## MCP Server on Lambda

„Åæ„Åö„ÅØMCP„Çµ„Éº„Éê„Éº„ÅÆÂÆüË£Ö„Åß„Åô„ÄÇ
‰ª•‰∏ã„ÅÆ„É©„Ç§„Éñ„É©„É™„ÇÑ„ÉÑ„Éº„É´„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

„ÉªFastMCP
MCP„Çµ„Éº„Éê„Éº„ÇÑ„ÉÑ„Éº„É´„ÅÆÂÆöÁæ©„Åå„Ç∑„É≥„Éó„É´„Å´ÂÆüË£Ö„Åß„Åç„Çã„É©„Ç§„Éñ„É©„É™„ÄÇ
MCPÂÖ¨Âºè„ÅÆPython SDK„Å´Áµ±Âêà„Åï„Çå„ÅüFastMCP 1.0„Å®„ÄÅÊ©üËÉΩÊã°Âºµ„ÇíÁ∂ö„Åë„ÇãFastMCP 2.0„Åå„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅ‰ªäÂõû„ÅØ2.0„ÅÆÊñπ„Çí‰Ωø„ÅÑ„Åæ„Åô„ÄÇ

„ÉªLambda Web Adapter
LambdaÈñ¢Êï∞„ÅåÂèó„ÅëÂèñ„Çã„Ç§„Éô„É≥„Éà„ÇíLambdaÁã¨Ëá™„ÅÆÂΩ¢Âºè„Åß„ÅØ„Å™„ÅèHTTP„É™„ÇØ„Ç®„Çπ„Éà„Å®„Åó„Å¶Âèó„ÅëÂèñ„Çã„Åü„ÇÅ„Å´„ÄÅLambda Web Adapter„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ
„Å™„Åä„ÄÅ‰ªäÂõûLambdaÈñ¢Êï∞„Å´ÂØæ„Åó„Å¶„ÅØFunction URLs„ÅßÁõ¥Êé•HTTTP„Ç¢„ÇØ„Çª„Çπ„Åó„Åæ„Åô„ÄÇ

Lambda„ÅÆ„Ç≥„Éº„Éâ„ÅØ‰ª•‰∏ã„ÅÆ„Å®„Åä„Çä„Åß„ÅôÔºàÊäúÁ≤ãÔºâ
```python: main.py

# FastMCP „Çµ„Éº„Éê„Éº„ÅÆÂàùÊúüÂåñÔºà„Çπ„ÉÜ„Éº„Éà„É¨„Çπ„É¢„Éº„ÉâÔºâ
mcp = FastMCP(stateless_http=True, json_response=True)

# CloudTrail „ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅÆÂàùÊúüÂåñ
def get_cloudtrail_client():
    """CloudTrail„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Çí‰ΩúÊàê"""
    region = os.environ.get('AWS_REGION', 'ap-northeast-1')
    return boto3.client('cloudtrail', region_name=region)

@mcp.tool
def lookup_cloudtrail_events(
    start_time: str,
    end_time: str,
    username: Optional[str] = None,
    max_records: int = 50
) -> Dict[str, Any]:
    """
    CloudTrail API„ÅÆlookup_events„ÇíÂÆüË°å„Åó„Å¶„Ç§„Éô„É≥„ÉàÂ±•Ê≠¥„ÇíÂèñÂæó
    Note: CloudTrail API„ÅÆÂà∂Èôê„Å´„Çà„Çä„ÄÅLookupAttributes„Å´„ÅØ1„Å§„ÅÆÂ±ûÊÄß„ÅÆ„ÅøÊåáÂÆöÂèØËÉΩ„Åß„Åô„ÄÇ
    
    Args:
        start_time: Ê§úÁ¥¢ÈñãÂßãÊôÇÂàª (ISO 8601ÂΩ¢Âºè, ‰æã: "2024-01-01T00:00:00Z")
        end_time: Ê§úÁ¥¢ÁµÇ‰∫ÜÊôÇÂàª (ISO 8601ÂΩ¢Âºè, ‰æã: "2024-01-01T23:59:59Z")
        username: „Éï„Ç£„É´„Çø„Éº„Åô„Çã„É¶„Éº„Ç∂„ÉºÂêç („Ç™„Éó„Ç∑„Éß„É≥)
        max_records: ÂèñÂæó„Åô„ÇãÊúÄÂ§ß„É¨„Ç≥„Éº„ÉâÊï∞ (1-50, „Éá„Éï„Ç©„É´„Éà: 50)
    
    Returns:
        Dict[str, Any]: CloudTrail „Ç§„Éô„É≥„Éà„ÅÆ„É™„Çπ„Éà
    """
    try:
        cloudtrail = get_cloudtrail_client()
        
        # „Éë„É©„É°„Éº„Çø„ÅÆÊ∫ñÂÇô
        lookup_params = {
            'StartTime': datetime.fromisoformat(start_time.replace('Z', '+00:00')),
            'EndTime': datetime.fromisoformat(end_time.replace('Z', '+00:00')),
            'MaxResults': min(max_records, 50)  # API„ÅÆÂà∂Èôê„Å´„Çà„ÇäÊúÄÂ§ß50
        }
        
        # „É¶„Éº„Ç∂„ÉºÂêç„Éï„Ç£„É´„Çø„Éº„ÅÆËøΩÂä†ÔºàÊåáÂÆö„Åï„Çå„ÅüÂ†¥Âêà„ÅÆ„ÅøÔºâ
        if username:
            lookup_params['LookupAttributes'] = [
                {
                    'AttributeKey': 'Username',
                    'AttributeValue': username
                }
            ]
        
        # CloudTrail API„ÅÆÂÆüË°å
        response = cloudtrail.lookup_events(**lookup_params)
        
        return {
            'status': 'success',
            'events': response.get('Events', []),
            'next_token': response.get('NextToken'),
            'total_events': len(response.get('Events', []))
        }
        
    except Exception as e:
        return {
            'status': 'error',
            'error_message': str(e),
            'error_type': type(e).__name__
        }


# FastAPI„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÇíÂèñÂæó
app = mcp.http_app() 

```

„Åì„Çå„Å†„Åë„Åß„Åô„ÄÇ
FastMCP„ÅÆ„Åä„Åã„Åí„Åß„Å®„Å¶„ÇÇ„Ç∑„É≥„Éó„É´„Å™ÂÆüË£Ö„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ

„Åæ„Åü„ÄÅLambda„Å´„Éá„Éó„É≠„Ç§„Åô„ÇãÈöõ„Å´Lambda Web Adapter„Çí„Éë„ÉÉ„Ç±„Éº„Ç∏„Å´Âê´„ÇÅ„Çã„Åü„ÇÅ„ÄÅ‰ª•‰∏ã„ÅÆDockerfile„ÇíË®òËø∞„Åó„Åæ„Åô„ÄÇ
```Dockerfile: Dockerfile
FROM ghcr.io/astral-sh/uv:python3.13-bookworm

# Copy AWS Lambda Web Adapter
COPY --from=public.ecr.aws/awsguru/aws-lambda-adapter:0.9.1 /lambda-adapter /opt/extensions/lambda-adapter

WORKDIR /app
COPY pyproject.toml README.md /app/
RUN uv sync

COPY . ./

ENV UV_CACHE_DIR=/tmp/uv-cache
ENV UV_NO_SYNC=1 

ENV AWS_LAMBDA_ADAPTER_BUFFER_OFF=1
ENV AWS_LAMBDA_ADAPTER_CALLBACK_PATH="/callback"
ENV AWS_LAMBDA_ADAPTER_HTTP_PROXY_BUFFERING="off"

ENV PYTHONPATH=/app
ENV PATH="/app/.venv/bin:$PATH"

CMD ["uvicorn", "cloudtrail_mcp.main:app", "--host", "0.0.0.0", "--port", "8080"] 
```

„Åù„Çå„Åã„Çâpyproject.toml
```toml: pyproject.toml
[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "cloudtrail-mcp"
version = "0.1.0"
description = "CloudTrail MCP Server"
readme = "README.md"
requires-python = ">=3.11"
dependencies = [
    "fastmcp==2.10.4",
    "boto3==1.35.94",
    "uvicorn==0.34.0",
]

[tool.hatch.build.targets.wheel]
packages = ["cloudtrail_mcp"]

[tool.uv]
dev-dependencies = [] 
```

„Åæ„Åü„ÄÅLambdaÈÉ®ÂàÜ„ÅÆCDK„Çπ„Çø„ÉÉ„ÇØ„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´Ë®òËø∞„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ
```typescript: stack.ts
// CloudTrail MCP Server Lambda (Container Image)
const cloudtrailMcpFunction = new lambda.DockerImageFunction(this, 'CloudTrailMCPServer', {
    code: lambda.DockerImageCode.fromImageAsset('./lambda'),
    memorySize: 256,
    timeout: cdk.Duration.minutes(15),
    architecture: lambda.Architecture.ARM_64,
    environment: {
    UV_CACHE_DIR: '/tmp/uv-cache',
    UV_NO_SYNC: '1',
    AWS_LAMBDA_ADAPTER_BUFFER_OFF: '1',
    AWS_LAMBDA_ADAPTER_CALLBACK_PATH: '/callback',
    AWS_LAMBDA_ADAPTER_HTTP_PROXY_BUFFERING: 'off',
    PYTHONPATH: '/app',
    PATH: '/app/.venv/bin:$PATH'
    },
    role: cloudtrailMcpRole,
    description: 'CloudTrail MCP Server with FastMCP and Lambda Web Adapter'
});

// Function URL
const functionUrl = cloudtrailMcpFunction.addFunctionUrl({
    authType: lambda.FunctionUrlAuthType.NONE,
    invokeMode: lambda.InvokeMode.BUFFERED,
    cors: {
    allowCredentials: true,
    allowedHeaders: ['*'],
    allowedMethods: [lambda.HttpMethod.ALL],
    allowedOrigins: ['*']
    }
});
```
:::message
Function URLs„ÅØË™çË®º„ÇíÊúâÂäπÂåñ„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ
„Éó„É≠„ÉÄ„ÇØ„Ç∑„Éß„É≥Áí∞Â¢É„Åß‰∏äË®ò„ÅÆMCP on Lambda„Çí„Åô„ÇãÂ†¥Âêà„Å´„ÅØIAMË™çË®º„Çí„Å§„Åë„Çã„ÄÅAPI Gateway„ÇíÁΩÆ„Åè„Å™„Å©„Åó„Å¶Ë™çË®º„ÇíÊúâÂäπÂåñ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
:::


## Agent with Stranda Agents

Á∂ö„ÅÑ„Å¶AI„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆÂÆüË£Ö„Åß„Åô„ÄÇ



MCP Server on Lambda„ÅÆÈÉ®ÂàÜ„ÅØAWS Lambda Tool MCP Server„ÅßÂÆüË£Ö„Åß„Åç„Å™„ÅÑ„ÅãÔºü
MCP Server„ÅØ„Å©„Åì„Å´„Éõ„Çπ„Éà„Åï„Çå„ÇãÔºü„É≠„Éº„Ç´„É´Ôºü
„ÄÄ‚Üí„É≠„Éº„Ç´„É´„Å£„ÅΩ„ÅÑ„ÄÇ„ÇÑ„Å£„Å±„ÇäÂΩìÂàù„ÅÆ‰∫àÂÆöÈÄö„ÇäAWS Lambda‰∏ä„Å´ÊßãÁØâ„Åô„Çã„ÄÇ

ÂèÇËÄÉ
https://memoribuka-lab.com/?p=4460
https://qiita.com/5enxia/items/0dfca327e8f14f0b9d86

FastMCP„ÄÅLambda Web Adapter„ÅßÊßãÁØâ„ÄÇ
API Gateway„ÅØ‰Ωø„Çè„Åö„ÄÅFunction URL„Çí‰Ωø„ÅÜ
„Åæ„Åü„ÄÅÂèÇËÄÉ„Åß„ÅØSAM„Çí‰Ωø„Å£„Å¶„ÅÑ„Çã„Åå„ÄÅ‰ªäÂõû„ÅØCDK„Çí‰ΩøÁî®„Åô„Çã
Lambda Function URL„ÅØIAMË™çË®º„Åó„Åã‰Ωø„Åà„Å™„ÅÑ„Åå„ÄÅ„É™„ÇØ„Ç®„Çπ„Éà„Åô„ÇãÈöõ„Å´„ÅØÁΩ≤Âêç‰ªò„ÅçURL„Çí‰Ωú„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„ÄÇ
ECS„ÅÆ„Çø„Çπ„ÇØ„É≠„Éº„É´„ÇíÂèñÂæó„Åó„Å¶ÁΩ≤Âêç‰ªò„ÅçURL„Çí‰Ωú„Çã„Ç´„Çπ„Çø„É†„ÉÑ„Éº„É´„Çí‰Ωú„Å£„Å¶„Ç®„Éº„Ç∏„Çß„É≥„Éà„Å´‰Ωø„Çè„Åõ„Çâ„Çå„Å™„ÅÑ„ÅãÔºü
„ÅÑ„ÇÑ„Åæ„Å¶ÊúÄÂ∞èÊßãÊàê„Åã„ÇâÂÆüË£Ö„Åó„Çà„ÅÜ„ÄÇ„Åæ„Åö„ÅØË™çË®º„Å™„Åó„Åß„ÄÇ



# ÊÑüÊÉ≥
„Éª„Åô„Åπ„Å¶„ÇíAWS CDK„ÅßÊßãÁØâ„Åô„Çã„ÅÆ„Åß„É¢„Éé„É¨„Éù„ÅßÊ∏à„ÇÄ
„ÄÄÁâπ„Å´MCP on Lambda„Å´„Å§„ÅÑ„Å¶„ÅØSAM„Åß„Éá„Éó„É≠„Ç§„Åô„ÇãË®ò‰∫ã„Å∞„Åã„Çä„Å†„Å£„Åü„ÅÆ„Åß„ÄÅ‰ªäÂõûCDK„Åß„ÅÆÊßãÁØâ‰æã„ÇíÊÆã„Åõ„Åü„ÅÆ„ÅØ„Çà„Åã„Å£„Åü„Åã„Å®ÊÄù„ÅÜ„ÄÇ
„Éª„Ç®„Éº„Ç∏„Çß„É≥„Éà„Åå„Ç®„Éº„Ç∏„Çß„É≥„Éà„Åü„ÇãË¶ÅÁ¥†„Å®„Åó„Å¶„ÉÑ„Éº„É´„ÅØÈáçË¶Å„Å™Ë¶ÅÁ¥†„Å†„Å®ÊÑü„Åò„Çã
    „ÉªÂçò„Å´Êé®Ë´ñ„Å®ÂõûÁ≠îÁîüÊàê„Å†„Åë„Åô„Çã„ÅÆ„ÅØ„ÉÅ„É£„ÉÉ„Éà„ÉÑ„Éº„É´„ÄÇ
    „Éª„ÉÑ„Éº„É´„Çí„ÅÑ„Åã„Å´Â¢ó„ÇÑ„Åõ„Çã„Åã„ÅØÈáçË¶Å„ÄÇ
    „ÉªÂÖ¨Âºè„ÅßË∂≥„Çä„Å™„ÅÑ„Å™„Çâ„Çµ„Éº„Éâ„Éë„Éº„ÉÜ„Ç£„ÇÇÊâã„Å†„Åå„ÄÅ„Åæ„Å†„Çª„Ç≠„É•„É™„ÉÜ„Ç£„ÅÆÊ®ôÊ∫ñÂåñ„ÅØÂßã„Åæ„Å£„Åü„Å∞„Åã„Çä„ÄÇÁ§æÂÜÖ„ÉÑ„Éº„É´„Å™„Å©„ÅØËá™ÂàÜ„Åü„Å°„ÅßÊßãÁØâ„Åô„Çã„ÅÆ„ÇÇÊâã„Å†„Çç„ÅÜ„ÄÇ
„ÉªStrands Agents„Å´„Å§„ÅÑ„Å¶
    „ÉªMastra„ÇÑLangGraph„Åß„ÅÆ„Ç®„Éº„Ç∏„Çß„É≥„ÉàÊßãÁØâ„ÅØÁ∞°Âçò„Å´„ÇÑ„Å£„Å¶„Åø„Åü„Åì„Å®„Åå„ÅÇ„Çã„Åå„ÄÅStrands Agents„Åå‰ªä„ÅÆ„Å®„Åì„Çç‰∏ÄÁï™„ÅäÊâãËªΩ„ÄÇ„É¢„Éá„É´ÈßÜÂãï„ÅÆÂΩ±Èüø„ÅåÂ§ß„Åç„ÅÑ„ÄÇ
    „Éª‰ªäÂõûËß¶„Å£„Åü„ÅÆ„ÅØË°®Â±§„Å´ÈÅé„Åé„Å™„ÅÑ„ÄÇ„Éû„É´„ÉÅ„É¢„Éº„ÉÄ„É´Âá¶ÁêÜ„ÇÑ„É°„É¢„É™„ÄÅSlackÈÄ£Êê∫„ÄÅAWSÁµ±Âêà„Å™„Å©„ÅÆÊ©üËÉΩ„Åå„ÉÑ„Éº„É´Áæ§„Å®ÊåáÂÆöÊèê‰æõ„Åï„Çå„Å¶„Åä„Çä„ÄÅ„Åì„Çå„Çâ„ÇíÊ¥ªÁî®„Åô„Çã„Åì„Å®„Åß„Çà„ÇäÈ´òÂ∫¶„Å™„Ç®„Éº„Ç∏„Çß„É≥„Éà„Çí‰ΩúÊàê„Åß„Åç„Çã„ÄÇhttps://github.com/strands-agents/tools
    „Éª
„ÉªMCP Server on Lambda„Å´„Å§„ÅÑ„Å¶
    „ÉªMCP„Çµ„Éº„Éê„Éº„ÅØÂøÖ„Åö„Åó„ÇÇLambda‰∏ä„Å´„Éá„Éó„É≠„Ç§„Åô„ÇãÂøÖË¶Å„ÅØ„Å™„ÅÑ„ÄÇAWS„Åã„ÇâLambda MCP Server„Å®„ÅÑ„ÅÜ„ÄÅMCPÁµåÁî±„ÅßLambdaÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åõ„ÇãMCP„Çµ„Éº„Éê„Éº„ÇÇÂÖ¨Èñã„Åï„Çå„Å¶„Åä„Çä„ÄÅ„Åì„Çå„Çí‰Ωø„Åà„Å∞MCP„Çµ„Éº„Éê„Éº„ÅÆÊ©üËÉΩËá™‰Ωì„ÇíLambda‰∏ä„Å´„Éá„Éó„É≠„Ç§„Åô„ÇãÂøÖË¶Å„ÅØ„Å™„ÅÑ„ÄÇ‰ªäÂõû„ÅØMCP„Çµ„Éº„Éê„ÉºËá™‰Ωì„Çí„É™„É¢„Éº„ÉàÂåñ„Åó„Åü„Åã„Å£„Åü„Åü„ÇÅ„ÄÅLambda‰∏ä„Å´ÊßãÁØâ„Åó„Åü„ÄÇ
    „ÉªMCP„ÅÆ„É≠„Ç∏„ÉÉ„ÇØ„ÇíÊâ±„ÅÑÊÖ£„Çå„ÅüAWS„ÅßÊßãÁØâ„Åß„Åç„Çã„ÅÆ„ÅØ‰ΩìÈ®ì„Åå„ÅÑ„ÅÑ„ÄÇ„Åæ„Åü„ÄÅÂêÑ„ÉÑ„Éº„É´„ÅÆ„Ç¢„ÇØ„Çª„ÇπÁØÑÂõ≤„ÇÇ„Åì„Çå„Åæ„ÅüÊâ±„ÅÑÊÖ£„Çå„ÅüIAM„ÅßÁÆ°ÁêÜ„Åß„Åç„Çã„ÅÆ„ÇÇ„ÅÑ„ÅÑ„ÄÇ
    „ÉªMCP„Çµ„Éº„Éê„Éº„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Åù„ÅÆ„ÇÇ„ÅÆ„ÅÆË™çË®º„Å´„Å§„ÅÑ„Å¶„ÅØLambda Function URL„ÅÆÂ†¥Âêà„ÅØIAMË™çË®ºÔºàÁΩ≤Âêç‰ªò„ÅçURL„Åß„É™„ÇØ„Ç®„Çπ„Éà„Åô„ÇãÂΩ¢ÂºèÔºâ„Åó„ÅãÂà©Áî®„Åß„Åç„Å™„ÅÑ„ÄÇ
    „ÄÄ‰ªäÂõû„ÅØ„Éá„É¢„Å™„ÅÆ„ÅßË™çË®º„Å™„Åó„ÅßÊßãÁØâ„Åó„Åü„ÅåÊú¨Áï™Âà©Áî®„Åß„ÅØAPI Gateway„Å™„Å©„ÅßË™çË®º„Çí„Åã„Åë„ÇãÂøÖË¶Å„Åå„ÅÇ„ÇãÔºàAPI Gateway„ÅÆ„Çø„Ç§„É†„Ç¢„Ç¶„ÉàÊôÇÈñì„Å´„ÅØÊ≥®ÊÑèÔºâ„ÄÇ


# Ë™≤È°å

## AWS Lambda Tool MCP Server„Å´„Å§„ÅÑ„Å¶
LambdaÈñ¢Êï∞„ÇíMCP„ÉÑ„Éº„É´„Å®„Åó„Å¶Âëº„Å≥Âá∫„Åõ„Çã„Çà„ÅÜ„Å´„Åô„ÇãAWS Lambda Tool MCP Server„Å®„ÅÑ„ÅÜ„ÇÇ„ÅÆ„Åå„ÅÇ„Çã„ÄÇ
„Åü„Å†„ÄÅ„Åì„Çå„ÅØ„É≠„Éº„Ç´„É´„Åß„Éõ„Çπ„Éà„Åô„ÇãMCP„Çµ„Éº„Éê„Éº„Åß„ÅÇ„Çä„ÄÅ‰ªäÂõû„ÇÑ„Çä„Åü„Åã„Å£„Åü„Åì„Å®„Å´„Éï„Ç£„ÉÉ„Éà„Åó„Å™„Åã„Å£„Åü„ÅÆ„ÅßÂà©Áî®„ÇíË¶ãÈÄÅ„Å£„Åü„ÄÇ
ÁµêÊûúÁöÑ„Å´FastMCP„ÇÑLambda Web Adapter„Å™„Å©Ëß¶„Å£„Åü„Åì„Å®„ÅÆ„Å™„Åã„Å£„Åü„É©„Ç§„Éñ„É©„É™„Çí‰Ωø„ÅÜÊ©ü‰ºö„ÅåÂæó„Çâ„Çå„Åü„ÄÇ

## Ë™çË®º„Å´„Å§„ÅÑ„Å¶
LambdaÂçò‰Ωì„Åß„ÇÑ„Çç„ÅÜ„Å®„Åô„Çã„Å®Function URL„ÅÆIAMË™çË®º„Åó„Åã‰Ωø„Åà„Å™„ÅÑ„ÄÇ
„Åù„Çå„Åß„ÇÇECS„ÅÆ„Çø„Çπ„ÇØ„É≠„Éº„É´„ÅßË™çË®º„Åß„Åç„Çã„Å™„Çâ„ÅÑ„ÅÑ„Åã„Å®ÊÄù„Å£„Åü„Çâ„ÄÅÂÆüÈöõ„Å´„É™„ÇØ„Ç®„Çπ„Éà„Åô„ÇãÈöõ„Å´„ÅØË™çË®ºÊÉÖÂ†±„ÇíÂÖÉ„Å´Sig4ÂΩ¢Âºè„ÅßÁΩ≤Âêç‰ªò„ÅçURL„Çí‰Ωú„Çâ„Å™„Åë„Çå„Å∞„ÅÑ„Åë„Å™„ÅÑ„ÄÇ
MCP„ÉÑ„Éº„É´„Å®„Åó„Å¶Ë®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„ÇãFunction URL„Å®Ë™çË®ºÊÉÖÂ†±„Åã„ÇâÁΩ≤Âêç‰ªò„ÅçURL„Çí‰Ωú„Å£„Å¶„Åù„Çå„Åß„É™„ÇØ„Ç®„Çπ„Éà„Åô„Çã„ÄÅ„Å®„ÅÑ„ÅÜ„Å®„Åì„Çç„Åæ„Åß„Ç®„Éº„Ç∏„Çß„É≥„Éà„Å´‰ªª„Åõ„Çâ„Çå„Çã„Åã„ÅØ„ÇÑ„Å£„Å¶„Å™„ÅÑ„ÅÆ„Åß‰∏çÊòé„ÄÇ
Strands Agents„ÅØ„Ç´„Çπ„Çø„É†„ÉÑ„Éº„É´„ÅÆÂÆüË£Ö„ÇÇÁ∞°Âçò„Å™„ÅÆ„Åß„ÄÅË™çË®ºÊÉÖÂ†±ÂèñÂæó„Åó„Å¶ÁΩ≤Âêç„ÇíÁîüÊàê„Åô„Çã„ÉÑ„Éº„É´„Çí‰Ωú„Çã„ÅÆ„ÇÇËÄÉ„Åà„Åü„ÄÇ„Åå„ÄÅÊôÇÈñìÁöÑ„Å´„Åß„Åç„Å¶„ÅÑ„Å™„ÅÑ„ÄÇ

LambdaÂçò‰Ωì„Åò„ÇÉ„Å™„Åë„Çå„Å∞API Gateway„ÇÑCloudfront„Å™„Å©„ÅßÊüîËªü„Å´Ë™çË®º„Çí„Åã„Åë„Çâ„Çå„Çã„ÄÇ
MCP Server on Lambda„Åß„ÅÑ„ÅÑÊÑü„Åò„ÅÆË™çË®º„ÉªË™çÂèØ„ÅÆ‰ªïÁµÑ„Åø„Åå„ÅÇ„Çå„Å∞ÊòØÈùû„Å®„ÇÇÊïô„Åà„Å¶Ê¨≤„Åó„ÅÑ„ÄÇ

„Å°„Å™„Åø„Å´AWS Lambda Tool MCP Server„Åß„ÅØIAMË™çË®º„Åå„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Çã„Çâ„Åó„ÅÑ„ÄÇ
