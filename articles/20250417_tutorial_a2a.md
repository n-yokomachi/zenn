---
title: "A2Aã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’è§£èª¬ã—ã¤ã¤å®Œèµ°ã—ã¦ã¿ã‚‹"
emoji: "ğŸ¤"
type: "tech"
topics: [a2a,ai,mcp,aiagent,]
published: true
---

ä»Šå›ã¯AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®é€šä¿¡ãƒ»é€£æºã‚’è£œå®Œã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã‚ã‚‹A2Aï¼ˆAgent2Agentï¼‰ã®å…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’è©¦ã—ãªãŒã‚‰ã€ãã®æ¦‚è¦ã‚’ç†è§£ã—ã¦ã„ãã¾ã™ã€‚


# A2Aã¨ã¯ï¼Ÿ

A2Aã¯ç±³å›½æ™‚é–“2025å¹´4æœˆ9æ—¥ã«Googleã‹ã‚‰ç™ºè¡¨ã•ã‚ŒãŸã‚ªãƒ¼ãƒ—ãƒ³ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚
è¤‡æ•°ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®é€£æºã‚’å®šç¾©ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã‚¿ã‚¹ã‚¯ã®ä½œæˆã¨ä¼é”ã‚’ã€ãƒªãƒ¢ãƒ¼ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒãã®ã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œã‚„æƒ…å ±æä¾›ã‚’è¡Œã†ã“ã¨ã§ã€æœ€çµ‚çš„ãªã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

https://a2a-protocol.org/latest/

ä»Šå¹´è©±é¡Œã®MCPï¼ˆModel Context Protocolï¼‰ã¨ã¯æ€§è³ªãŒé•ã†ã‚‚ã®ã§ã‚ã‚Šã€ã©ã¡ã‚‰ã‹ãŒã©ã¡ã‚‰ã‹ã‚’ä»£æ›¿ã™ã‚‹ã¨ã„ã†ã“ã¨ã¯ãªãã€ã‚€ã—ã‚äº’ã„ã«è£œå®Œã—ã‚ã†ã‚‚ã®ã§ã™ã€‚
å…·ä½“çš„ã«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ä¸ãˆã‚‰ã‚ŒãŸã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œã¯A2Aã«ã‚ˆã‚‹ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§å®Ÿè¡Œã—ã¤ã¤ã€ãã‚Œã‚‰ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã‚„ãƒ‡ãƒ¼ã‚¿ã¨é€£æºã‚’è¡Œã†éš›ã«ã¯MCPã‚’åˆ©ç”¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã€ã¿ãŸã„ã«ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚„å½¹å‰²ãŒåˆ†ã‹ã‚Œã¦ã„ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/bb8b21b466ec-20250601.png)
*ä¸Šè¨˜ã®A2Aæ¦‚è¦ãƒªãƒ³ã‚¯ã‹ã‚‰å¼•ç”¨*

ã‚ã¨MCPã«ã¤ã„ã¦ã¯è‡ªåˆ†ã‚‚è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹ã®ã§è‰¯ã‘ã‚Œã°ãã¡ã‚‰ã‚‚ã”è¦§ãã ã•ã„

https://zenn.dev/yokomachi/articles/20250318_tutorial_mcp


# ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’è©¦ã—ã¦ã¿ã‚‹

ç†è§£ã®ãŸã‚ã«ã¯æ‰‹ã‚’å‹•ã‹ã™ã®ãŒæ‰‹ã£å–ã‚Šæ—©ã„ã€ã¨ã„ã†ã“ã¨ã§ã‚„ã£ã¦ã„ãã¾ã™ã€‚  
Googleã‹ã‚‰A2A SDKãŒå…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€Pythonã®Tutorialã‚‚ã‚ã‚‹ã®ã§ãã‚Œã‚’ã‚„ã£ã¦ã¿ã¾ã™ã€‚  
Tutorialã§ä½¿ç”¨ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’å‚ç…§ãã ã•ã„ã€‚

https://github.com/google-a2a/a2a-samples

ãªãŠã€ä»Šå›å®Ÿæ–½ã™ã‚‹Tutorialã®å†…å®¹ã¯2025/6/1æ™‚ç‚¹ã®ã‚‚ã®ã§ã™ã€‚  
çµæ§‹é »ç¹ã«å†…å®¹ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€é©å®œèª­ã¿æ›¿ãˆã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚

## Setup

ã¾ãšã¯ç’°å¢ƒæ§‹ç¯‰ã‚’è¡Œã„ã¾ã™ã€‚
Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯3.13ä»¥ä¸ŠãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

```
>python --version
Python 3.13.3

>git clone https://github.com/google-a2a/a2a-samples.git -b main --depth 1
>cd a2a-samples

>python -m venv .venv
>.venv\Scripts\activate
```

ã§ã€ã„ããªã‚Šã§ã™ãŒãã®ã¾ã¾ã§ã¯å‹•ã‹ãªã„ã¨ã“ã‚ãŒâ€¦
requirements.txtã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ä¿ƒã•ã‚Œã¾ã™ãŒã€å®Ÿéš›ã®txtã¯samples/pythonå†…ã«ã‚ã‚Šã¾ã™ã€‚
ã¾ãŸã€å†…å®¹ãŒlatestã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€ä»¥ä¸‹ã®å†…å®¹ã«æ›¸ãæ›ãˆã¦å®Ÿè¡Œã—ã¾ã™ã€‚

``` text: samples/python/requirements.txt
a2a-sdk>=0.2.4
uvicorn>=0.34.0
```

```
>cd samples/python
>pip install -r requirements.txt
```

ã§ã€A2A SDKã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆç¢ºèªã‚’ã—ã‚ã¨ã‚ã‚‹ã®ã§ä¸‹è¨˜ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```
python -c "import a2a; print('A2A SDK imported successfully')"
```

## Agent Skills & Agent Card

A2Aã«ãŠã„ã¦ã¯å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä½•ã‚’ã§ãã‚‹ã‹ï¼ˆã‚¹ã‚­ãƒ«ï¼‰ã€ãã—ã¦ã»ã‹ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒãã®ã‚¹ã‚­ãƒ«ã‚’çŸ¥ã‚‹æ–¹æ³•ï¼ˆã‚«ãƒ¼ãƒ‰ï¼‰ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’äººé–“ã¨ã™ã‚‹ã¨ã€

- ã‚¹ã‚­ãƒ«ï¼šæ‰€å±ã‚„å½¹è·
- ã‚«ãƒ¼ãƒ‰ï¼šå½¹è·ï¼ˆã‚¹ã‚­ãƒ«ï¼‰ã‚„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰ã‚’æ›¸ã„ãŸååˆº

ã§ã™ã­ã€‚

ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ï¼ˆsamples/python/agents/helloworldï¼‰ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¹ã‚­ãƒ«

``` python: __main__.py
skill = AgentSkill(
        id='hello_world',
        name='Returns hello world',
        description='just returns hello world',
        tags=['hello world'],
        examples=['hi', 'hello world'],
        # inputModes/outputModesã¨ã—ã¦å…¥å‡ºåŠ›ã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹MIMEã‚¿ã‚¤ãƒ—ã®æŒ‡å®šã‚‚å¯
        #ï¼ˆex.text/plain, application/json, etc.ï¼‰
    )
```

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰

``` python: __main__.py
public_agent_card = AgentCard(
        name='Hello World Agent',
        description='Just a hello world agent',
        url='http://localhost:9999/',
        version='1.0.0',
        defaultInputModes=['text'],
        defaultOutputModes=['text'],
        capabilities=AgentCapabilities(streaming=True),
        skills=[skill],     # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¹ã‚­ãƒ«ã‚’è¨˜è¿°
        supportsAuthenticatedExtendedCard=True,
    )
```

## The Agent Executor

A2Aã«æº–æ‹ ã—ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã€å®Ÿéš›ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ­ã‚¸ãƒƒã‚¯ã®æ©‹æ¸¡ã—ã‚’è¡Œã†ã®ãŒAgentExecutorã§ã™ã€‚  
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’äººé–“ã¨ã™ã‚‹ã¨ã€AgentExecutorã¯å¤–éƒ¨ã¨ã®ã‚„ã‚Šå–ã‚Šã‚’è¡Œã†PCï¼ˆã¾ãŸã¯ãƒ¡ãƒ¼ãƒ©ãƒ¼ã¨ã‹ãƒãƒ£ãƒƒãƒˆãƒ„ãƒ¼ãƒ«ï¼‰ã€ã¿ãŸã„ãªæ„Ÿã˜ã§ã—ã‚‡ã†ã‹ã€‚  

AgentExecutorã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚’ç¶™æ‰¿ã—ã¦å®Ÿè£…ã—ã¾ã™ã€‚
AgentExecutorã§ã¯ä¸»è¦ãªãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦ä»¥ä¸‹ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

    - async def execute(self, context: RequestContext, event_queue: EventQueue): 
        - ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¾ãŸã¯ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’æœŸå¾…ã™ã‚‹å—ä¿¡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹ã€‚
        - å…¥åŠ›(context)ã‚’å‡¦ç†ã—ã€event_queueã‚’ä½¿ç”¨ã—ã¦Message,Task,TaskStatusUpdateEvent,TaskArtifactUpdateEventã®ã„ãšã‚Œã‹ã‚’è¿”ã™ã€‚
    - async def cancel(self, context: RequestContext, event_queue: EventQueue): 
        - é€²è¡Œä¸­ã®ã‚¿ã‚¹ã‚¯ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹è¦æ±‚ã‚’å‡¦ç†ã™ã‚‹ã€‚

ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ï¼ˆsamples/python/agents/helloworldï¼‰ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã€‚

``` python: agent_executor.py
# ã“ã‚ŒãŒå®Ÿè¡Œå¯¾è±¡ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€‚å®Ÿéš›ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹ã¨ã“ã‚
class HelloWorldAgent:
    """Hello World Agent."""

    async def invoke(self) -> str:
        return 'Hello World'
```

``` python: agent_executor.py
# ã“ã‚ŒãŒAgentExecutorã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã™ã‚‹ã¨ã“ã‚
class HelloWorldAgentExecutor(AgentExecutor):
    """Test AgentProxy Implementation."""

    def __init__(self):
        self.agent = HelloWorldAgent()

    # executeãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å‡¦ç†
    # message/send ã¾ãŸã¯ message/streamãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå…¥ã£ã¦ããŸå ´åˆç™ºç«ã™ã‚‹
    # ã“ã“ã§ã¯HelloWorldAgentã‚’å®Ÿè¡Œã—ã€çµæœã‚’event_queueã«ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã—ã¦è¿”ã™
    async def execute(
        self,
        context: RequestContext,
        event_queue: EventQueue,
    ) -> None:
        result = await self.agent.invoke()
        event_queue.enqueue_event(new_agent_text_message(result))

    # cancelãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†
    # ã“ã“ã§ã¯å˜ã«ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã¾ã›ã‚“ã‚ˆã€ä¾‹å¤–ã‚’å‡ºã—ã¦ã„ã‚‹ã ã‘
    async def cancel(
        self, context: RequestContext, event_queue: EventQueue
    ) -> None:
        raise Exception('cancel not supported')
```


## Starting the Server
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒã‚’ç«‹ã¦ã‚‹å‰ã«ã€HelloWorldã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå®Ÿè£…ã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒã®å†…å®¹ã‚’ç¢ºèªã—ã¾ã™ã€‚

### DefaultRequestHandler

``` python: __main__.py
request_handler = DefaultRequestHandler(
        agent_executor=HelloWorldAgentExecutor(),
        task_store=InMemoryTaskStore(),
    )
```
DefaultRequestHandlerãƒãƒ³ãƒ‰ãƒ©ã¯AgentExecutorã¨TaskStoreã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹ã€‚
å—ä¿¡ã—ãŸA2A RPCã‚³ãƒ¼ãƒ«ã‚’ã€AgentExecutorã®é©åˆ‡ãªãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆexecuteã‚„cancelãªã©ï¼‰ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚
ã¾ãŸã€TaskStoreã«ã‚ˆã‚Šã‚¿ã‚¹ã‚¯ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã€å†ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãªã©ï¼‰ã‚’ç®¡ç†ã™ã‚‹ã€‚

### A2AStarletteApplication

``` python: __main__.py
server = A2AStarletteApplication(
        agent_card=public_agent_card,
        http_handler=request_handler,
        extended_agent_card=specific_extended_agent_card,
    )
```
A2AStarletteApplicationã‚¯ãƒ©ã‚¹ã¯ã€agent_cardã¨request_handlerï¼ˆä¸Šã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ãŸãƒãƒ³ãƒ‰ãƒ©ï¼‰ ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹ã€‚
agent_cardã®å†…å®¹ã¯ã‚µãƒ¼ãƒãŒ/.well-known/agent.jsonã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§å…¬é–‹ã™ã‚‹ã€‚
ã¾ãŸã€request_handlerã«é€£æºã—ã¦A2Aãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚³ãƒ¼ãƒ«ã®å‡¦ç†ã‚’è¡Œã†ã€‚
ï¼Š[Starlette](https://www.starlette.io/)ã¯Pythonç”¨ã®éåŒæœŸã‚¦ã‚§ãƒ–é€šä¿¡ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ASGIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

### uvicorn.run(server_app_builder.build(), ...)

``` python: __main__.py
uvicorn.run(server.build(), host='0.0.0.0', port=9999)
```
A2AStarletteApplicationã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ãŸã‚µãƒ¼ãƒã®å®Ÿè¡Œéƒ¨åˆ†ã€‚
ï¼Š[Uvicorn](https://www.uvicorn.org/)ã¯ASGIæº–æ‹ ã®Webã‚µãƒ¼ãƒ


ã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒã‚’ç«‹ã¦ã¦ã¿ã¾ã™ã€‚

```
# from the a2a-samples directory
>python samples/python/agents/helloworld/__main__.py
INFO:     Started server process [14868]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:9999 (Press CTRL+C to quit)
```

## Interacting with the Server
ãã‚Œã§ã¯ãƒ†ã‚¹ãƒˆç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰å…ˆã»ã©ç«‹ã¦ãŸã‚µãƒ¼ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã£ã¦ã¿ã¾ã™ã€‚
ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã«ã¯ãƒ†ã‚¹ãƒˆç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰ã‚‚ã‚ã‚‹ã®ã§ãã‚Œã‚’ä½¿ã£ã¦ã„ãã¾ã™ã€‚
ã¾ãšã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ä¸­èº«ã‚’è»½ãè¦‹ã¦ã¿ã¾ã™ã€‚

``` python: test_client.py
# ã“ã“ã§ã‚µãƒ¼ãƒã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã‚’fetch
base_url = 'http://localhost:9999'

    async with httpx.AsyncClient() as httpx_client:
        resolver = A2ACardResolver(
            httpx_client=httpx_client,
            base_url=base_url,
        )

# (ä¸­ç•¥)

# å˜ä¸€ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ä¿¡
client = A2AClient(
    httpx_client=httpx_client, agent_card=final_agent_card_to_use
)
logger.info('A2AClient initialized.')

send_message_payload: dict[str, Any] = {
    'message': {
        'role': 'user',
        'parts': [
            {'kind': 'text', 'text': 'how much is 10 USD in INR?'}
        ],
        'messageId': uuid4().hex,
    },
}
request = SendMessageRequest(
    id=str(uuid4()), params=MessageSendParams(**send_message_payload)
)
response = await client.send_message(request)
print(response.model_dump(mode='json', exclude_none=True))

# (ä¸­ç•¥)

# ç¶šã‘ã¦ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚é€ä¿¡ã—ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ä¿¡
streaming_request = SendStreamingMessageRequest(
    id=str(uuid4()), params=MessageSendParams(**send_message_payload)
)

stream_response = client.send_message_streaming(streaming_request)

async for chunk in stream_response:
    print(chunk.model_dump(mode='json', exclude_none=True))
```

ã§ã¯åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰åŒã˜ãä»®æƒ³ç’°å¢ƒã‚’å®Ÿè¡Œã—ã¦ã€samples/python/agents/helloworld/test_client.pyã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```
# ã»ã‹ã®ãƒ­ã‚°ã¯çœç•¥

INFO:httpx:HTTP Request: POST http://localhost:9999/ "HTTP/1.1 200 OK"
{'id': '2b5dd422-17a6-4e8f-afad-ba941967a6c6', 'jsonrpc': '2.0', 'result': {'kind': 'message', 'messageId': 'dcd8312a-de8d-41f0-b1b4-1d732ec06065', 'parts': [{'kind': 'text', 'text': 'Hello World'}], 'role': 'agent'}}

INFO:httpx:HTTP Request: POST http://localhost:9999/ "HTTP/1.1 200 OK"
{'id': '3250869d-b066-4deb-a1ea-aee56a6eeb4a', 'jsonrpc': '2.0', 'result': {'kind': 'message', 'messageId': '08fe3e84-4d28-44df-b5ee-24db2a4a4d9f', 'parts': [{'kind': 'text', 'text': 'Hello World'}], 'role': 'agent'}}
```

å˜ä¸€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®2å›é€ã£ã¦ã„ã‚‹ã®ã§ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚‚2å›è¿”ã£ã¦ãã¦ã„ã¾ã™ã€‚
ï¼ˆã§ã‚‚ã€ã‚ã‚Œï¼Ÿã€€å…¬å¼ã ã¨ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®ã»ã†ã¯"final":trueã£ã¦ã„ã†ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚‹ã¯ãšãªã‚“ã ã‘ã©â€¦ï¼‰

## Streaming & Multi-Turn Interactions (LangGraph Example)

A2Aã®è¶…åŸºæœ¬ã®å®Ÿè£…ã¨å‹•ä½œã¯ç¢ºèªã§ããŸã®ã§ã€æ¬¡ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã«å«ã¾ã‚Œã¦ã„ã‚‹LangGraphã§æ§‹ç¯‰ã•ã‚ŒãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚
ã“ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯é€šè²¨ã®å¤‰æ›ã‚’è¡Œã†ã‚‚ã®ã§ã€ReActãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚
å‡¦ç†ãƒ•ãƒ­ãƒ¼ã¯ä»¥ä¸‹ã®ã‚°ãƒ©ãƒ•ã§è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/aad59d1d1531-20250601.png)

ã¾ãšã¯ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã®samples/python/agents/langgraphã«ç§»å‹•ã—ã€ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

```
cd samples/python/agents/langgraph
pip install -e .[dev]
```

ã¾ãŸã€Geminiã®APIã‚­ãƒ¼ã‚’æ‰•ã„å‡ºã—ã€langgraph/.envã«è¨˜è¿°ã—ã¾ã™ã€‚

``` txt: .env
GOOGLE_API_KEY=YOUR_API_KEY
```

å…ˆã»ã©ç«‹ã¡ä¸Šã’ãŸHelloWorldã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’åœæ­¢ã—ã€æ–°è¦ã«LangGraphã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å«ã‚€ã‚µãƒ¼ãƒã‚’ç«‹ã¡ä¸Šã’ã¾ã™
```
python __main__.py
```

ç¶šã‘ã¦ãƒ†ã‚¹ãƒˆç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚

```
python app/test_client.py
```

ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ãã¾ã—ãŸã€‚
textãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¦‹ã‚‹ã¨å‡¦ç†ã®æ®µéšã«å¿œã˜ã¦åˆ†å‰²ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¿”ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

```
{'id': '425194e5-74d6-4dfc-8202-465b05cf6ffc', 'jsonrpc': '2.0', 'result': {'contextId': '0a6c011b-a938-4d3d-ac7d-b6ea71f7058b', 'final': False, 'kind': 'status-update', 'status': {'message': {'contextId': '0a6c011b-a938-4d3d-ac7d-b6ea71f7058b', 'kind': 'message', 'messageId': '1312118a-0e3b-42c5-a9ed-da4d71ace6be', 'parts': [{'kind': 'text', 'text': 'Looking up the exchange rates...'}], 'role': 'agent', 'taskId': '6041da17-ebd7-47d9-b492-edbc889e092b'}, 'state': 'working'}, 'taskId': '6041da17-ebd7-47d9-b492-edbc889e092b'}}
{'id': '425194e5-74d6-4dfc-8202-465b05cf6ffc', 'jsonrpc': '2.0', 'result': {'contextId': '0a6c011b-a938-4d3d-ac7d-b6ea71f7058b', 'final': False, 'kind': 'status-update', 'status': {'message': {'contextId': '0a6c011b-a938-4d3d-ac7d-b6ea71f7058b', 'kind': 'message', 'messageId': '8bdc33d8-d347-46c0-a9fe-4fe14f458d91', 'parts': [{'kind': 'text', 'text': 'Processing the exchange rates..'}], 'role': 'agent', 'taskId': '6041da17-ebd7-47d9-b492-edbc889e092b'}, 'state': 'working'}, 'taskId': '6041da17-ebd7-47d9-b492-edbc889e092b'}}
{'id': '425194e5-74d6-4dfc-8202-465b05cf6ffc', 'jsonrpc': '2.0', 'result': {'contextId': '0a6c011b-a938-4d3d-ac7d-b6ea71f7058b', 'final': True, 'kind': 'status-update', 'status': {'message': {'contextId': '0a6c011b-a938-4d3d-ac7d-b6ea71f7058b', 'kind': 'message', 'messageId': 'ff70fc42-b528-4072-9119-f13a4c663eb0', 'parts': [{'kind': 'text', 'text': '10 USD is 855.6 INR'}], 'role': 'agent', 'taskId': '6041da17-ebd7-47d9-b492-edbc889e092b'}, 'state': 'input-required'}, 'taskId': '6041da17-ebd7-47d9-b492-edbc889e092b'}}
```

# ãŠã—ã¾ã„

ã¨ã„ã†ã‚ã‘ã§A2Aã®å…¬å¼Tutorialã‚’å®Œèµ°ã—ã¦ã¿ã¾ã—ãŸã€‚
Tutorialã®ç¯„å›²ã§ã¯1:1ã§A2Aã®ä»•çµ„ã¿ã«ç„¦ç‚¹ã‚’å½“ã¦ãŸæ„Ÿã˜ã®ã‚µãƒ³ãƒ—ãƒ«ã ã‘ã‚’ä½¿ç”¨ã—ã¾ã—ãŸãŒã€
åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã®ä¸­ã«ã¯ä»–ã«ã‚‚å¤šãã®ã‚µãƒ³ãƒ—ãƒ«ãŒã‚ã‚‹ã®ã§ã€ã“ã‚Œã‚‚è©¦ã—ã¦ã¿ãŸã„ã¨ã“ã‚ã§ã™ã€‚
ç‰¹ã«A2Aã®é†é†å‘³ã£ã¦è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ãŒã‚ã£ã¦ãã‚Œã‚’ä½¿ã„åˆ†ã‘ã‚‹ã€ã£ã¦ã¨ã“ã‚ã«ã‚ã‚‹ã¨æ€ã†ã®ã§ã€1:Nã®æ§‹æˆã‚‚ã‚„ã£ã¦ã¿ãŸã„ã§ã™ã­ã€‚

# å‚è€ƒ

https://a2a-protocol.org/latest/tutorials/python/1-introduction/
https://github.com/google-a2a/A2A
https://github.com/google-a2a/a2a-samples
